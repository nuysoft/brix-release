{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///components/table/sticky.js","webpack:///webpack/bootstrap f02100a9c4671ea0a215","webpack:///./src/table/sticky/index.js","webpack:///./src/table/sticky/sticky.js","webpack:///external \"jquery\"","webpack:///external \"underscore\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","$","_","sticky","table","fixStyle","event","fixStickyWrapperStyle","$table","$wrapper","$stickyTable","$stickyWrapper","fixStickyTableStyle","parent","stickyId","attr","uniqueId","remove","insertBefore","off","on","throttle","scrollLeft","target","addClass","appendTo","find","html","hide","toggleStickyWrapper","undefined","document","is","width","outerWidth","css","position","left","offset","top","z-index","overflow","type","$ths","$stickyThs","each","$th","index","height","outerHeight","display","text-align","scrollY","window","tableHeight","tableTop","stickyWrapperHeight","show","container","$tables","$container","apply"],"mappings":"CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,UAAAA,QAAA,eACA,kBAAAC,gBAAAC,IACAD,QAAA,uBAAAJ,GACA,gBAAAC,SACAA,QAAA,2BAAAD,EAAAG,QAAA,UAAAA,QAAA,eAEAJ,EAAA,2BAAAC,EAAAD,EAAA,OAAAA,EAAA,aACCO,KAAA,SAAAC,EAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAV,OAGA,IAAAC,GAAAU,EAAAD,IACAV,WACAY,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAb,EAAAD,QAAAC,IAAAD,QAAAS,GAGAR,EAAAY,QAAA,EAGAZ,EAAAD,QAvBA,GAAAW,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAAUR,EAAQD,EAASS,GEtDjCR,EAAAD,QAAAS,EAAA,IF4DM,SAAUR,EAAQD,EAASS,GG5DjC,GAAAS,GAAAC,CACAD,IAEAT,EAAA,GAAAA,EAAA,IACAU,EACA,SACAC,EAAAC,GAGA,QAAAC,GAAAC,GA4BA,QAAAC,GAAAC,GACAC,EAAAD,EAAAE,EAAAC,EAAAC,EAAAC,GACAC,EAAAN,EAAAE,EAAAC,EAAAC,EAAAC,GA7BA,GAAAH,GAAAP,EAAAG,GACAK,EAAAD,EAAAK,SAGAC,EAAAN,EAAAO,KAAA,mBAAAb,EAAAc,SAAA,UACAf,GAAA,mBAAAa,EAAA,KAAAL,GAAAQ,SACAT,EAAAO,KAAA,iBAAAD,EAGA,IAAAH,GAAAV,EAAA,SACAc,KAAA,gBAAAD,GACAI,aAAAV,EACAC,GAAAU,IAAA,iBAAAL,GAAAM,GAAA,iBAAAN,EACAZ,EAAAmB,SAAA,SAAAf,GACAK,EAAAW,WAAAhB,EAAAiB,OAAAD,aACiB,GAIjB,IAAAZ,GAAAT,EAAA,kCACAuB,SAAAhB,EAAAO,KAAA,UACAU,SAAAd,EACAD,GAAAgB,KAAA,WAAAC,KACAnB,EAAAkB,KAAA,WAAAC,QASAtB,IACAM,EAAAiB,OAGAC,EAAAC,OAAAtB,EAAAC,EAAAC,EAAAC,GACAV,EAAA8B,UAAAZ,IAAA,iBAAAL,GAAAM,GAAA,iBAAAN,EACAZ,EAAAmB,SAAA,SAAAf,GACAuB,EAAAvB,EAAAE,EAAAC,EAAAC,EAAAC,GACAA,EAAAqB,GAAA,aAAA3B,EAAAC,IACiB,MAIjBL,EAAA8B,UAAAZ,IAAA,iBAAAL,GACAM,GAAA,iBAAAN,EACAZ,EAAAmB,SAAA,SAAAf,GACAD,EAAAC,IACqB,MAIrB,QAAAC,GAAAD,EAAAE,EAAAC,EAAAC,EAAAC,GACAA,EAAAsB,MAAAzB,EAAA0B,cACAvB,EAAAwB,KACAC,SAAA,QACAC,KAAA7B,EAAA8B,SAAAD,KACAE,IAAA,EACAC,UAAA,EACAC,SAAA,WAIA,QAAA7B,GAAAN,EAAAE,EAAAC,EAAAC,EAAAC,GACA,IAAAL,GAAA,WAAAA,EAAAoC,KAAA,CAEAhC,EAAAuB,MAAAzB,EAAA0B,aACA,IAAAS,GAAAnC,EAAAkB,KAAA,gBACAkB,EAAAlC,EAAAgB,KAAA,eACAxB,GAAA2C,KAAAF,EAAA,SAAAG,EAAAC,GACAD,EAAA7C,EAAA6C,GACA7C,EAAA2C,EAAAG,IAAAZ,KACAF,MAAAa,EAAAZ,aACAc,OAAAF,EAAAG,cACAC,QAAAJ,EAAAX,IAAA,WACAgB,aAAAL,EAAAX,IAAA,mBAKA,QAAAN,GAAAvB,EAAAE,EAAAC,EAAAC,EAAAC,GACA,GAAAyC,GAAAC,OAAAD,QACAE,EAAA9C,EAAAyC,cACAM,EAAA/C,EAAA8B,SAAAC,IACAiB,EAAA7C,EAAAsC,aAEA,OAAAG,IAAAG,MACA5C,GAAAiB,OAIA2B,EAAAH,MAAAG,EAAAD,EAAAE,MACA7C,GAAA8C,OAGAF,EAAAH,KAAAG,EAAAD,EAAAE,MACA7C,GAAAiB,OAGAwB,EAAAG,EAAAD,MACA3C,GAAAiB,OADA,OAMA,gBAAA8B,GACA,GACAC,GADAC,EAAA3D,EAAAyD,EAEAC,GAAAC,EAAA5B,GAAA,SAAA4B,EACA3D,EAAA,6BAAA2D,GACA1D,EAAA2C,KAAAc,EAAA,SAAAvD,GACAD,EAAAC,OAGAyD,MAAAhF,EAAAkB,KAAA+B,SAAA9B,IAAAlB,EAAAD,QAAAmB,KHgEM,SAAUlB,EAAQD,GI7LxBC,EAAAD,QAAAM,GJmMM,SAAUL,EAAQD,GKnMxBC,EAAAD,QAAAO","file":"components/table/sticky.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/table/sticky\"] = factory(require(\"jquery\"), require(\"underscore\"));\n\telse\n\t\troot[\"components/table/sticky\"] = factory(root[\"jquery\"], root[\"underscore\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/table/sticky\"] = factory(require(\"jquery\"), require(\"underscore\"));\n\telse\n\t\troot[\"components/table/sticky\"] = factory(root[\"jquery\"], root[\"underscore\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1)\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global define */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t        __webpack_require__(2), __webpack_require__(3)\n\t    ], __WEBPACK_AMD_DEFINE_RESULT__ = function(\n\t        $, _\n\t    ) {\n\t\n\t        function sticky(table /*, hooks TODO */ ) {\n\t            var $table = $(table)\n\t            var $wrapper = $table.parent()\n\t\n\t            // \n\t            var stickyId = $table.attr('data-sticky-id') || _.uniqueId('sticky_')\n\t            $('[data-table-id=\"' + stickyId + '\"]', $wrapper).remove()\n\t            $table.attr('data-sticky-id', stickyId)\n\t\n\t            // \n\t            var $stickyWrapper = $('<div>')\n\t                .attr('data-table-id', stickyId)\n\t                .insertBefore($table)\n\t            $wrapper.off('scroll.sticky.' + stickyId).on('scroll.sticky.' + stickyId,\n\t                _.throttle(function(event) {\n\t                    $stickyWrapper.scrollLeft(event.target.scrollLeft)\n\t                }, 4)\n\t            )\n\t\n\t            // \n\t            var $stickyTable = $('<table><thead></thead></table>')\n\t                .addClass($table.attr('class'))\n\t                .appendTo($stickyWrapper)\n\t            $stickyTable.find('> thead').html(\n\t                $table.find('> thead').html()\n\t            )\n\t\n\t            // 完美克隆\n\t            function fixStyle(event) {\n\t                fixStickyWrapperStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper)\n\t                fixStickyTableStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper)\n\t            }\n\t\n\t            fixStyle()\n\t            $stickyWrapper.hide()\n\t\n\t            // \n\t            toggleStickyWrapper(undefined, $table, $wrapper, $stickyTable, $stickyWrapper)\n\t            $(document).off('scroll.sticky.' + stickyId).on('scroll.sticky.' + stickyId,\n\t                _.throttle(function(event) {\n\t                    toggleStickyWrapper(event, $table, $wrapper, $stickyTable, $stickyWrapper)\n\t                    if ($stickyWrapper.is(':visible')) fixStyle(event)\n\t                }, 100)\n\t            )\n\t\n\t            // \n\t            $(document).off('resize.sticky.' + stickyId)\n\t                .on('resize.sticky.' + stickyId,\n\t                    _.throttle(function(event) {\n\t                        fixStyle(event)\n\t                    }, 1000)\n\t                )\n\t        }\n\t\n\t        function fixStickyWrapperStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper) { /* jshint unused:false */\n\t            $stickyWrapper.width($table.outerWidth())\n\t            $stickyWrapper.css({\n\t                position: 'fixed',\n\t                left: $table.offset().left,\n\t                top: 0,\n\t                'z-index': 1,\n\t                overflow: 'hidden'\n\t            })\n\t        }\n\t\n\t        function fixStickyTableStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper) { /* jshint unused:false */\n\t            if (event && event.type === 'scroll') return\n\t\n\t            $stickyTable.width($table.outerWidth())\n\t            var $ths = $table.find('> thead > th')\n\t            var $stickyThs = $stickyTable.find('> thead > th')\n\t            _.each($ths, function($th, index) {\n\t                $th = $($th)\n\t                $($stickyThs[index]).css({\n\t                    width: $th.outerWidth(),\n\t                    height: $th.outerHeight(),\n\t                    display: $th.css('display'),\n\t                    'text-align': $th.css('text-align')\n\t                })\n\t            })\n\t        }\n\t\n\t        function toggleStickyWrapper(event, $table, $wrapper, $stickyTable, $stickyWrapper) { /* jshint unused:false */\n\t            var scrollY = window.scrollY\n\t            var tableHeight = $table.outerHeight()\n\t            var tableTop = $table.offset().top\n\t            var stickyWrapperHeight = $stickyWrapper.outerHeight()\n\t\n\t            if (scrollY <= tableTop) {\n\t                $stickyWrapper.hide()\n\t                return\n\t            }\n\t            // tableTop < scrollY && scrollY <= tableTop + tableHeight\n\t            if (tableTop < scrollY && scrollY <= tableTop + tableHeight - stickyWrapperHeight) {\n\t                $stickyWrapper.show()\n\t                return\n\t            }\n\t            if (tableTop < scrollY && scrollY > tableTop + tableHeight - stickyWrapperHeight) {\n\t                $stickyWrapper.hide()\n\t                return\n\t            }\n\t            if (scrollY > tableTop + tableHeight) {\n\t                $stickyWrapper.hide()\n\t                return\n\t            }\n\t        }\n\t\n\t        return function(container) {\n\t            var $container = $(container)\n\t            var $tables\n\t            if ($container.is('table')) $tables = $container\n\t            else $tables = $(' table[data-sticky=\"true\"]', $container)\n\t            _.each($tables, function(table) {\n\t                sticky(table)\n\t            })\n\t        }\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// components/table/sticky.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f02100a9c4671ea0a215","module.exports = require('./sticky')\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/table/sticky/index.js\n// module id = 0\n// module chunks = 0","/* global define */\ndefine(\n    [\n        'jquery', 'underscore'\n    ],\n    function(\n        $, _\n    ) {\n\n        function sticky(table /*, hooks TODO */ ) {\n            var $table = $(table)\n            var $wrapper = $table.parent()\n\n            // \n            var stickyId = $table.attr('data-sticky-id') || _.uniqueId('sticky_')\n            $('[data-table-id=\"' + stickyId + '\"]', $wrapper).remove()\n            $table.attr('data-sticky-id', stickyId)\n\n            // \n            var $stickyWrapper = $('<div>')\n                .attr('data-table-id', stickyId)\n                .insertBefore($table)\n            $wrapper.off('scroll.sticky.' + stickyId).on('scroll.sticky.' + stickyId,\n                _.throttle(function(event) {\n                    $stickyWrapper.scrollLeft(event.target.scrollLeft)\n                }, 4)\n            )\n\n            // \n            var $stickyTable = $('<table><thead></thead></table>')\n                .addClass($table.attr('class'))\n                .appendTo($stickyWrapper)\n            $stickyTable.find('> thead').html(\n                $table.find('> thead').html()\n            )\n\n            // 完美克隆\n            function fixStyle(event) {\n                fixStickyWrapperStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper)\n                fixStickyTableStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper)\n            }\n\n            fixStyle()\n            $stickyWrapper.hide()\n\n            // \n            toggleStickyWrapper(undefined, $table, $wrapper, $stickyTable, $stickyWrapper)\n            $(document).off('scroll.sticky.' + stickyId).on('scroll.sticky.' + stickyId,\n                _.throttle(function(event) {\n                    toggleStickyWrapper(event, $table, $wrapper, $stickyTable, $stickyWrapper)\n                    if ($stickyWrapper.is(':visible')) fixStyle(event)\n                }, 100)\n            )\n\n            // \n            $(document).off('resize.sticky.' + stickyId)\n                .on('resize.sticky.' + stickyId,\n                    _.throttle(function(event) {\n                        fixStyle(event)\n                    }, 1000)\n                )\n        }\n\n        function fixStickyWrapperStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper) { /* jshint unused:false */\n            $stickyWrapper.width($table.outerWidth())\n            $stickyWrapper.css({\n                position: 'fixed',\n                left: $table.offset().left,\n                top: 0,\n                'z-index': 1,\n                overflow: 'hidden'\n            })\n        }\n\n        function fixStickyTableStyle(event, $table, $wrapper, $stickyTable, $stickyWrapper) { /* jshint unused:false */\n            if (event && event.type === 'scroll') return\n\n            $stickyTable.width($table.outerWidth())\n            var $ths = $table.find('> thead > th')\n            var $stickyThs = $stickyTable.find('> thead > th')\n            _.each($ths, function($th, index) {\n                $th = $($th)\n                $($stickyThs[index]).css({\n                    width: $th.outerWidth(),\n                    height: $th.outerHeight(),\n                    display: $th.css('display'),\n                    'text-align': $th.css('text-align')\n                })\n            })\n        }\n\n        function toggleStickyWrapper(event, $table, $wrapper, $stickyTable, $stickyWrapper) { /* jshint unused:false */\n            var scrollY = window.scrollY\n            var tableHeight = $table.outerHeight()\n            var tableTop = $table.offset().top\n            var stickyWrapperHeight = $stickyWrapper.outerHeight()\n\n            if (scrollY <= tableTop) {\n                $stickyWrapper.hide()\n                return\n            }\n            // tableTop < scrollY && scrollY <= tableTop + tableHeight\n            if (tableTop < scrollY && scrollY <= tableTop + tableHeight - stickyWrapperHeight) {\n                $stickyWrapper.show()\n                return\n            }\n            if (tableTop < scrollY && scrollY > tableTop + tableHeight - stickyWrapperHeight) {\n                $stickyWrapper.hide()\n                return\n            }\n            if (scrollY > tableTop + tableHeight) {\n                $stickyWrapper.hide()\n                return\n            }\n        }\n\n        return function(container) {\n            var $container = $(container)\n            var $tables\n            if ($container.is('table')) $tables = $container\n            else $tables = $(' table[data-sticky=\"true\"]', $container)\n            _.each($tables, function(table) {\n                sticky(table)\n            })\n        }\n    }\n)\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/table/sticky/sticky.js\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery\"\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"underscore\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}