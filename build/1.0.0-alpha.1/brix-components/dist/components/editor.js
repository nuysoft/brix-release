!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery"),require("underscore"),require("mousetrap"),require("brix/base")):"function"==typeof define&&define.amd?define(["jquery","underscore","mousetrap","brix/base"],e):"object"==typeof exports?exports["components/editor"]=e(require("jquery"),require("underscore"),require("mousetrap"),require("brix/base")):t["components/editor"]=e(t.jquery,t.underscore,t.mousetrap,t["brix/base"])}(this,function(t,e,n,i){return function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var i,a;i=[n(2),n(3),n(4),n(5),n(6),!function(){var t=new Error('Cannot find module "css!./editor.css"');throw t.code="MODULE_NOT_FOUND",t}(),!function(){var t=new Error('Cannot find module "css!fontawesome/css/font-awesome.css"');throw t.code="MODULE_NOT_FOUND",t}()],a=function(t,e,n,i,a){function r(){}function o(t,e){var n=new FileReader;n.onload=function(t){e&&e(t.target.result)},n.onerror=n.onprogress=function(){},n.readAsDataURL(t)}function d(n){n=t(".toolbar"),e.each(n.find("[data-command]"),function(e){var n=t(e),i=n.data("command");document.queryCommandState(i)?n.addClass("btn-primary"):n.removeClass("btn-primary")})}function l(t,e){var n=t.split(" "),i=n.shift(),a=n.join(" ")+(e||"");document.execCommand(i,0,a),d()}function s(i){e.each(g,function(e,a){n.bind(a.split(" "),function(n){n.target===i&&(n=new t.Event(n),n.preventDefault(),n.stopPropagation(),l(e))})})}function c(){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount)return t.getRangeAt(0)}function u(){v=c()}function f(){var t=window.getSelection();if(v){try{t.removeAllRanges()}catch(e){document.body.createTextRange().select(),document.selection.empty()}t.addRange(v)}}function m(n){var i=t(".editor");i.focus(),e.each(n,function(t){/^image\//.test(t.type)&&o(t,function(t){l("insertimage",t)})})}function b(n,i){n=t(".editor"),i=t(".toolbar"),e.each(i.find("[data-command]"),function(e){t(e).on("click",function(){f(),n.focus(),l(t(this).data("command")),u()})})}function p(){var e=t(".editor");e.on("dragenter dragover",!1).on("drop",function(t){var e=t.originalEvent.dataTransfer;t.stopPropagation(),t.preventDefault(),e&&e.files&&e.files.length>0&&m(e.files)})}e.extend(r.prototype,i.prototype,{options:{},render:function(){this.data=this.data||e.extend({},this.options);var n=this.$element=t(this.element),i=e.template(a)(this.data);n.append(i);var r=this.$toolbar=n.find(".btn-toolbar"),o=this.$editor=n.find(".editor");return s(o[0]),b(o[0]),p(),o.attr("contenteditable",!0).on("mouseup keyup mouseout",function(){u(),d(r)}),this},clean:function(){var t=this.$editor.html(),e=/(<br>|\s|<div><br><\/div>|&nbsp;)*$/;return this.$editor.html(t&&t.replace(e,"")),this}});var v,g={"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"};return r}.apply(e,i),!(void 0!==a&&(t.exports=a))},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=n},function(t,e){t.exports=i},function(t,e,n){var i;i=function(){return'<div class="editor-wrapper">\n    <div class="toolbar">\n        <div class="btn-group">\n            <a class="btn btn-default" data-command="bold"          title="Bold (Ctrl/Cmd+B)">      <i class="fa fa-bold"></i>          </a>\n            <a class="btn btn-default" data-command="italic"        title="Italic (Ctrl/Cmd+I)">    <i class="fa fa-italic"></i>        </a>\n            <a class="btn btn-default" data-command="strikethrough" title="Strikethrough">          <i class="fa fa-strikethrough"></i> </a>\n            <a class="btn btn-default" data-command="underline"     title="Underline (Ctrl/Cmd+U)"> <i class="fa fa-underline"></i>     </a>\n        </div>\n        <div class="btn-group">\n            <a class="btn btn-default" data-command="insertunorderedlist" title="Bullet list">               <i class="fa fa-list-ul"></i> </a>\n            <a class="btn btn-default" data-command="insertorderedlist"   title="Number list">               <i class="fa fa-list-ol"></i> </a>\n            <a class="btn btn-default" data-command="outdent"             title="Reduce indent (Shift+Tab)"> <i class="fa fa-dedent"></i>  </a>\n            <a class="btn btn-default" data-command="indent"              title="Indent (Tab)">              <i class="fa fa-indent"></i>  </a>\n        </div>\n        <div class="btn-group">\n            <a class="btn btn-default" data-command="justifyleft"   title="Align Left (Ctrl/Cmd+L)">  <i class="fa fa-align-left"></i>    </a>\n            <a class="btn btn-default" data-command="justifycenter" title="Center (Ctrl/Cmd+E)">      <i class="fa fa-align-center"></i>  </a>\n            <a class="btn btn-default" data-command="justifyright"  title="Align Right (Ctrl/Cmd+R)"> <i class="fa fa-align-right"></i>   </a>\n            <a class="btn btn-default" data-command="justifyfull"   title="Justify (Ctrl/Cmd+J)">     <i class="fa fa-align-justify"></i> </a>\n        </div>\n    </div>\n    <div class="editor mousetrap" contenteditable="true">\n        <div><b>Bold (Ctrl/Cmd+B)</b></div><div><i>Italic (Ctrl/Cmd+I)</i></div><div><strike>Strikethrough</strike></div><div><u>Underline (Ctrl/Cmd+U)</u></div><div><ul><li><span style="line-height: 1.42857143;">Bullet list</span><br></li></ul></div><div><ol><li><span style="line-height: 1.42857143;">Number list</span><br></li></ol></div><blockquote style="margin: 0 0 0 40px; border: none; padding: 0px;"><div>Reduce indent (Shift+Tab)</div></blockquote><div>Indent (Tab)</div><div>Align Left (Ctrl/Cmd+L)</div><div style="text-align: center;">Center (Ctrl/Cmd+E)</div><div style="text-align: right;">Align Right (Ctrl/Cmd+R)</div><div style="text-align: justify;">Justify (Ctrl/Cmd+J)</div>\n    </div>\n</div>'}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}])});
//# sourceMappingURL=editor.js.map