{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///components/editor.js","webpack:///webpack/bootstrap 2fd591ad444b0f989f90","webpack:///./src/editor/index.js","webpack:///./src/editor/editor.js","webpack:///external \"jquery\"","webpack:///external \"underscore\"","webpack:///external \"mousetrap\"","webpack:///external \"brix/base\"","webpack:///./src/editor/editor.tpl.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","e","Error","code","$","_","Mousetrap","Brix","template","Editor","readFileAsDataUrl","file","callback","reader","FileReader","onload","event","target","result","onerror","onprogress","readAsDataURL","updateToolbar","$toolbar","each","find","item","$item","command","data","document","queryCommandState","addClass","removeClass","execCommand","commandWithArgs","valueArg","commandArr","split","shift","args","join","bindHotKeys","editor","HOTKEYS","hotKey","bind","Event","preventDefault","stopPropagation","getCurrentRange","sel","window","getSelection","getRangeAt","rangeCount","saveSelection","selectedRange","restoreSelection","selection","removeAllRanges","ex","body","createTextRange","select","empty","addRange","insertFiles","files","$editor","focus","test","type","dataUrl","bindToolbar","on","initFileDrops","dataTransfer","originalEvent","length","extend","prototype","options","render","$element","element","html","append","attr","clean","rwhite","replace","ctrl+b meta+b","ctrl+i meta+i","ctrl+u meta+u","ctrl+z meta+z","ctrl+y meta+y meta+shift+z","ctrl+l meta+l","ctrl+r meta+r","ctrl+e meta+e","ctrl+j meta+j","shift+tab","tab","apply","undefined"],"mappings":"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","file":"components/editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"), require(\"mousetrap\"), require(\"brix/base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\", \"mousetrap\", \"brix/base\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/editor\"] = factory(require(\"jquery\"), require(\"underscore\"), require(\"mousetrap\"), require(\"brix/base\"));\n\telse\n\t\troot[\"components/editor\"] = factory(root[\"jquery\"], root[\"underscore\"], root[\"mousetrap\"], root[\"brix/base\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"), require(\"mousetrap\"), require(\"brix/base\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\", \"mousetrap\", \"brix/base\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/editor\"] = factory(require(\"jquery\"), require(\"underscore\"), require(\"mousetrap\"), require(\"brix/base\"));\n\telse\n\t\troot[\"components/editor\"] = factory(root[\"jquery\"], root[\"underscore\"], root[\"mousetrap\"], root[\"brix/base\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1)\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global define, window, document, FileReader, console */\n\t/*\n\t    http://mindmup.github.io/bootstrap-wysiwyg/\n\t    http://fontawesome.io/\n\t\n\t    TODO\n\t        line number\n\t        options bar\n\t */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t        __webpack_require__(2), __webpack_require__(3), __webpack_require__(4),\n\t        __webpack_require__(5),\n\t        __webpack_require__(6),\n\t        !(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"css!./editor.css\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }()),\n\t        !(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\"css!fontawesome/css/font-awesome.css\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }())\n\t    ], __WEBPACK_AMD_DEFINE_RESULT__ = function(\n\t        $, _, Mousetrap,\n\t        Brix,\n\t        template\n\t    ) {\n\t        /*\n\t            ### 数据\n\t                {}\n\t            ### 选项\n\t                data template\n\t            ### 属性\n\t                element moduleId clientId parentClientId childClientIds data template\n\t            ### 方法\n\t                .render()\n\t            ### 事件\n\t                ready destroyed\n\t        */\n\t        function Editor() {}\n\t\n\t        _.extend(Editor.prototype, Brix.prototype, {\n\t            options: {},\n\t            render: function() {\n\t                this.data = this.data || _.extend({}, this.options)\n\t\n\t                var $element = this.$element = $(this.element)\n\t                var html = _.template(template)(this.data)\n\t                $element.append(html)\n\t\n\t                var $toolbar = this.$toolbar = $element.find('.btn-toolbar')\n\t                var $editor = this.$editor = $element.find('.editor')\n\t\n\t                bindHotKeys($editor[0])\n\t                bindToolbar($editor[0])\n\t                initFileDrops()\n\t\n\t                $editor.attr('contenteditable', true)\n\t                    .on('mouseup keyup mouseout', function() {\n\t                        saveSelection()\n\t                        updateToolbar($toolbar)\n\t                    })\n\t                return this\n\t            },\n\t            clean: function() {\n\t                var html = this.$editor.html()\n\t                var rwhite = /(<br>|\\s|<div><br><\\/div>|&nbsp;)*$/\n\t                this.$editor.html(\n\t                    html && html.replace(rwhite, '')\n\t                )\n\t                return this\n\t            }\n\t        })\n\t\n\t        var HOTKEYS = {\n\t            'ctrl+b meta+b': 'bold',\n\t            'ctrl+i meta+i': 'italic',\n\t            'ctrl+u meta+u': 'underline',\n\t            'ctrl+z meta+z': 'undo',\n\t            'ctrl+y meta+y meta+shift+z': 'redo',\n\t            'ctrl+l meta+l': 'justifyleft',\n\t            'ctrl+r meta+r': 'justifyright',\n\t            'ctrl+e meta+e': 'justifycenter',\n\t            'ctrl+j meta+j': 'justifyfull',\n\t            'shift+tab': 'outdent',\n\t            'tab': 'indent'\n\t        }\n\t\n\t        var selectedRange\n\t\n\t        function readFileAsDataUrl(file, callback) {\n\t            var reader = new FileReader()\n\t            reader.onload = function(event) {\n\t                if (callback) callback(event.target.result)\n\t            };\n\t            reader.onerror = reader.onprogress = function() {\n\t                console.log(arguments)\n\t            }\n\t            reader.readAsDataURL(file)\n\t        }\n\t\n\t        function updateToolbar($toolbar) {\n\t            $toolbar = $('.toolbar')\n\t            _.each($toolbar.find('[data-command]'), function(item /*, index*/ ) {\n\t                var $item = $(item)\n\t                var command = $item.data('command')\n\t                if (document.queryCommandState(command)) {\n\t                    $item.addClass('btn-primary')\n\t                } else {\n\t                    $item.removeClass('btn-primary')\n\t                }\n\t            })\n\t        }\n\t\n\t        function execCommand(commandWithArgs, valueArg) {\n\t            var commandArr = commandWithArgs.split(' '),\n\t                command = commandArr.shift(),\n\t                args = commandArr.join(' ') + (valueArg || '');\n\t            document.execCommand(command, 0, args);\n\t            updateToolbar()\n\t        }\n\t\n\t        function bindHotKeys(editor) {\n\t            _.each(HOTKEYS, function(command, hotKey) {\n\t                Mousetrap.bind(\n\t                    hotKey.split(' '),\n\t                    function(event) {\n\t                        if (event.target !== editor) return\n\t                        event = new $.Event(event)\n\t                        event.preventDefault()\n\t                        event.stopPropagation()\n\t                        execCommand(command)\n\t                    }\n\t                )\n\t            })\n\t        }\n\t\n\t        function getCurrentRange() {\n\t            var sel = window.getSelection();\n\t            if (sel.getRangeAt && sel.rangeCount) {\n\t                return sel.getRangeAt(0);\n\t            }\n\t        }\n\t\n\t        function saveSelection() {\n\t            selectedRange = getCurrentRange();\n\t        }\n\t\n\t        function restoreSelection() {\n\t            var selection = window.getSelection();\n\t            if (selectedRange) {\n\t                try {\n\t                    selection.removeAllRanges();\n\t                } catch (ex) {\n\t                    document.body.createTextRange().select();\n\t                    document.selection.empty();\n\t                }\n\t\n\t                selection.addRange(selectedRange);\n\t            }\n\t        }\n\t\n\t        function insertFiles(files) {\n\t            var $editor = $('.editor')\n\t            $editor.focus();\n\t            _.each(files, function(file /*, index*/ ) {\n\t                if (/^image\\//.test(file.type)) {\n\t                    readFileAsDataUrl(file, function(dataUrl) {\n\t                        execCommand('insertimage', dataUrl)\n\t                    })\n\t                } else {\n\t                    console.log('unsupported file type', file.type)\n\t                }\n\t            })\n\t        }\n\t\n\t        // function markSelection(input, color) {\n\t        //     restoreSelection();\n\t        //     if (document.queryCommandSupported('hiliteColor')) {\n\t        //         document.execCommand('hiliteColor', 0, color || 'transparent');\n\t        //     }\n\t        //     saveSelection();\n\t        //     input.data(options.selectionMarker, color);\n\t        // }\n\t\n\t        function bindToolbar($editor, $toolbar) {\n\t            $editor = $('.editor')\n\t            $toolbar = $('.toolbar')\n\t            _.each($toolbar.find('[data-command]'), function(item /*, index*/ ) {\n\t                $(item).on('click', function() {\n\t                    restoreSelection()\n\t                    $editor.focus()\n\t                    execCommand($(this).data('command'))\n\t                    saveSelection()\n\t                })\n\t            })\n\t        }\n\t\n\t        function initFileDrops() {\n\t            var $editor = $('.editor')\n\t            $editor.on('dragenter dragover', false)\n\t                .on('drop', function(e) {\n\t                    var dataTransfer = e.originalEvent.dataTransfer\n\t                    e.stopPropagation()\n\t                    e.preventDefault()\n\t                    if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n\t                        insertFiles(dataTransfer.files);\n\t                    }\n\t                });\n\t        }\n\t\n\t        return Editor\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* global define */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t    return \"<div class=\\\"editor-wrapper\\\">\\n\" +\n\t        \"    <div class=\\\"toolbar\\\">\\n\" +\n\t        \"        <div class=\\\"btn-group\\\">\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"bold\\\"          title=\\\"Bold (Ctrl/Cmd+B)\\\">      <i class=\\\"fa fa-bold\\\"></i>          </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"italic\\\"        title=\\\"Italic (Ctrl/Cmd+I)\\\">    <i class=\\\"fa fa-italic\\\"></i>        </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"strikethrough\\\" title=\\\"Strikethrough\\\">          <i class=\\\"fa fa-strikethrough\\\"></i> </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"underline\\\"     title=\\\"Underline (Ctrl/Cmd+U)\\\"> <i class=\\\"fa fa-underline\\\"></i>     </a>\\n\" +\n\t        \"        </div>\\n\" +\n\t        \"        <div class=\\\"btn-group\\\">\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"insertunorderedlist\\\" title=\\\"Bullet list\\\">               <i class=\\\"fa fa-list-ul\\\"></i> </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"insertorderedlist\\\"   title=\\\"Number list\\\">               <i class=\\\"fa fa-list-ol\\\"></i> </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"outdent\\\"             title=\\\"Reduce indent (Shift+Tab)\\\"> <i class=\\\"fa fa-dedent\\\"></i>  </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"indent\\\"              title=\\\"Indent (Tab)\\\">              <i class=\\\"fa fa-indent\\\"></i>  </a>\\n\" +\n\t        \"        </div>\\n\" +\n\t        \"        <div class=\\\"btn-group\\\">\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifyleft\\\"   title=\\\"Align Left (Ctrl/Cmd+L)\\\">  <i class=\\\"fa fa-align-left\\\"></i>    </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifycenter\\\" title=\\\"Center (Ctrl/Cmd+E)\\\">      <i class=\\\"fa fa-align-center\\\"></i>  </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifyright\\\"  title=\\\"Align Right (Ctrl/Cmd+R)\\\"> <i class=\\\"fa fa-align-right\\\"></i>   </a>\\n\" +\n\t        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifyfull\\\"   title=\\\"Justify (Ctrl/Cmd+J)\\\">     <i class=\\\"fa fa-align-justify\\\"></i> </a>\\n\" +\n\t        \"        </div>\\n\" +\n\t        \"    </div>\\n\" +\n\t        \"    <div class=\\\"editor mousetrap\\\" contenteditable=\\\"true\\\">\\n\" +\n\t        \"        <div><b>Bold (Ctrl/Cmd+B)</b></div><div><i>Italic (Ctrl/Cmd+I)</i></div><div><strike>Strikethrough</strike></div><div><u>Underline (Ctrl/Cmd+U)</u></div><div><ul><li><span style=\\\"line-height: 1.42857143;\\\">Bullet list</span><br></li></ul></div><div><ol><li><span style=\\\"line-height: 1.42857143;\\\">Number list</span><br></li></ol></div><blockquote style=\\\"margin: 0 0 0 40px; border: none; padding: 0px;\\\"><div>Reduce indent (Shift+Tab)</div></blockquote><div>Indent (Tab)</div><div>Align Left (Ctrl/Cmd+L)</div><div style=\\\"text-align: center;\\\">Center (Ctrl/Cmd+E)</div><div style=\\\"text-align: right;\\\">Align Right (Ctrl/Cmd+R)</div><div style=\\\"text-align: justify;\\\">Justify (Ctrl/Cmd+J)</div>\\n\" +\n\t        \"    </div>\\n\" +\n\t        \"</div>\"\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** components/editor.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2fd591ad444b0f989f90\n **/","module.exports = require('./editor')\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/editor/index.js\n ** module id = 0\n ** module chunks = 0\n **/","/* global define, window, document, FileReader, console */\n/*\n    http://mindmup.github.io/bootstrap-wysiwyg/\n    http://fontawesome.io/\n\n    TODO\n        line number\n        options bar\n */\ndefine(\n    [\n        'jquery', 'underscore', 'mousetrap',\n        'brix/base',\n        './editor.tpl.js',\n        'css!./editor.css',\n        'css!fontawesome/css/font-awesome.css'\n    ],\n    function(\n        $, _, Mousetrap,\n        Brix,\n        template\n    ) {\n        /*\n            ### 数据\n                {}\n            ### 选项\n                data template\n            ### 属性\n                element moduleId clientId parentClientId childClientIds data template\n            ### 方法\n                .render()\n            ### 事件\n                ready destroyed\n        */\n        function Editor() {}\n\n        _.extend(Editor.prototype, Brix.prototype, {\n            options: {},\n            render: function() {\n                this.data = this.data || _.extend({}, this.options)\n\n                var $element = this.$element = $(this.element)\n                var html = _.template(template)(this.data)\n                $element.append(html)\n\n                var $toolbar = this.$toolbar = $element.find('.btn-toolbar')\n                var $editor = this.$editor = $element.find('.editor')\n\n                bindHotKeys($editor[0])\n                bindToolbar($editor[0])\n                initFileDrops()\n\n                $editor.attr('contenteditable', true)\n                    .on('mouseup keyup mouseout', function() {\n                        saveSelection()\n                        updateToolbar($toolbar)\n                    })\n                return this\n            },\n            clean: function() {\n                var html = this.$editor.html()\n                var rwhite = /(<br>|\\s|<div><br><\\/div>|&nbsp;)*$/\n                this.$editor.html(\n                    html && html.replace(rwhite, '')\n                )\n                return this\n            }\n        })\n\n        var HOTKEYS = {\n            'ctrl+b meta+b': 'bold',\n            'ctrl+i meta+i': 'italic',\n            'ctrl+u meta+u': 'underline',\n            'ctrl+z meta+z': 'undo',\n            'ctrl+y meta+y meta+shift+z': 'redo',\n            'ctrl+l meta+l': 'justifyleft',\n            'ctrl+r meta+r': 'justifyright',\n            'ctrl+e meta+e': 'justifycenter',\n            'ctrl+j meta+j': 'justifyfull',\n            'shift+tab': 'outdent',\n            'tab': 'indent'\n        }\n\n        var selectedRange\n\n        function readFileAsDataUrl(file, callback) {\n            var reader = new FileReader()\n            reader.onload = function(event) {\n                if (callback) callback(event.target.result)\n            };\n            reader.onerror = reader.onprogress = function() {\n                console.log(arguments)\n            }\n            reader.readAsDataURL(file)\n        }\n\n        function updateToolbar($toolbar) {\n            $toolbar = $('.toolbar')\n            _.each($toolbar.find('[data-command]'), function(item /*, index*/ ) {\n                var $item = $(item)\n                var command = $item.data('command')\n                if (document.queryCommandState(command)) {\n                    $item.addClass('btn-primary')\n                } else {\n                    $item.removeClass('btn-primary')\n                }\n            })\n        }\n\n        function execCommand(commandWithArgs, valueArg) {\n            var commandArr = commandWithArgs.split(' '),\n                command = commandArr.shift(),\n                args = commandArr.join(' ') + (valueArg || '');\n            document.execCommand(command, 0, args);\n            updateToolbar()\n        }\n\n        function bindHotKeys(editor) {\n            _.each(HOTKEYS, function(command, hotKey) {\n                Mousetrap.bind(\n                    hotKey.split(' '),\n                    function(event) {\n                        if (event.target !== editor) return\n                        event = new $.Event(event)\n                        event.preventDefault()\n                        event.stopPropagation()\n                        execCommand(command)\n                    }\n                )\n            })\n        }\n\n        function getCurrentRange() {\n            var sel = window.getSelection();\n            if (sel.getRangeAt && sel.rangeCount) {\n                return sel.getRangeAt(0);\n            }\n        }\n\n        function saveSelection() {\n            selectedRange = getCurrentRange();\n        }\n\n        function restoreSelection() {\n            var selection = window.getSelection();\n            if (selectedRange) {\n                try {\n                    selection.removeAllRanges();\n                } catch (ex) {\n                    document.body.createTextRange().select();\n                    document.selection.empty();\n                }\n\n                selection.addRange(selectedRange);\n            }\n        }\n\n        function insertFiles(files) {\n            var $editor = $('.editor')\n            $editor.focus();\n            _.each(files, function(file /*, index*/ ) {\n                if (/^image\\//.test(file.type)) {\n                    readFileAsDataUrl(file, function(dataUrl) {\n                        execCommand('insertimage', dataUrl)\n                    })\n                } else {\n                    console.log('unsupported file type', file.type)\n                }\n            })\n        }\n\n        // function markSelection(input, color) {\n        //     restoreSelection();\n        //     if (document.queryCommandSupported('hiliteColor')) {\n        //         document.execCommand('hiliteColor', 0, color || 'transparent');\n        //     }\n        //     saveSelection();\n        //     input.data(options.selectionMarker, color);\n        // }\n\n        function bindToolbar($editor, $toolbar) {\n            $editor = $('.editor')\n            $toolbar = $('.toolbar')\n            _.each($toolbar.find('[data-command]'), function(item /*, index*/ ) {\n                $(item).on('click', function() {\n                    restoreSelection()\n                    $editor.focus()\n                    execCommand($(this).data('command'))\n                    saveSelection()\n                })\n            })\n        }\n\n        function initFileDrops() {\n            var $editor = $('.editor')\n            $editor.on('dragenter dragover', false)\n                .on('drop', function(e) {\n                    var dataTransfer = e.originalEvent.dataTransfer\n                    e.stopPropagation()\n                    e.preventDefault()\n                    if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n                        insertFiles(dataTransfer.files);\n                    }\n                });\n        }\n\n        return Editor\n    }\n)\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/editor/editor.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"mousetrap\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"brix/base\"\n ** module id = 5\n ** module chunks = 0\n **/","/* global define */\ndefine(function() {\n    return \"<div class=\\\"editor-wrapper\\\">\\n\" +\n        \"    <div class=\\\"toolbar\\\">\\n\" +\n        \"        <div class=\\\"btn-group\\\">\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"bold\\\"          title=\\\"Bold (Ctrl/Cmd+B)\\\">      <i class=\\\"fa fa-bold\\\"></i>          </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"italic\\\"        title=\\\"Italic (Ctrl/Cmd+I)\\\">    <i class=\\\"fa fa-italic\\\"></i>        </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"strikethrough\\\" title=\\\"Strikethrough\\\">          <i class=\\\"fa fa-strikethrough\\\"></i> </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"underline\\\"     title=\\\"Underline (Ctrl/Cmd+U)\\\"> <i class=\\\"fa fa-underline\\\"></i>     </a>\\n\" +\n        \"        </div>\\n\" +\n        \"        <div class=\\\"btn-group\\\">\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"insertunorderedlist\\\" title=\\\"Bullet list\\\">               <i class=\\\"fa fa-list-ul\\\"></i> </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"insertorderedlist\\\"   title=\\\"Number list\\\">               <i class=\\\"fa fa-list-ol\\\"></i> </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"outdent\\\"             title=\\\"Reduce indent (Shift+Tab)\\\"> <i class=\\\"fa fa-dedent\\\"></i>  </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"indent\\\"              title=\\\"Indent (Tab)\\\">              <i class=\\\"fa fa-indent\\\"></i>  </a>\\n\" +\n        \"        </div>\\n\" +\n        \"        <div class=\\\"btn-group\\\">\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifyleft\\\"   title=\\\"Align Left (Ctrl/Cmd+L)\\\">  <i class=\\\"fa fa-align-left\\\"></i>    </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifycenter\\\" title=\\\"Center (Ctrl/Cmd+E)\\\">      <i class=\\\"fa fa-align-center\\\"></i>  </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifyright\\\"  title=\\\"Align Right (Ctrl/Cmd+R)\\\"> <i class=\\\"fa fa-align-right\\\"></i>   </a>\\n\" +\n        \"            <a class=\\\"btn btn-default\\\" data-command=\\\"justifyfull\\\"   title=\\\"Justify (Ctrl/Cmd+J)\\\">     <i class=\\\"fa fa-align-justify\\\"></i> </a>\\n\" +\n        \"        </div>\\n\" +\n        \"    </div>\\n\" +\n        \"    <div class=\\\"editor mousetrap\\\" contenteditable=\\\"true\\\">\\n\" +\n        \"        <div><b>Bold (Ctrl/Cmd+B)</b></div><div><i>Italic (Ctrl/Cmd+I)</i></div><div><strike>Strikethrough</strike></div><div><u>Underline (Ctrl/Cmd+U)</u></div><div><ul><li><span style=\\\"line-height: 1.42857143;\\\">Bullet list</span><br></li></ul></div><div><ol><li><span style=\\\"line-height: 1.42857143;\\\">Number list</span><br></li></ol></div><blockquote style=\\\"margin: 0 0 0 40px; border: none; padding: 0px;\\\"><div>Reduce indent (Shift+Tab)</div></blockquote><div>Indent (Tab)</div><div>Align Left (Ctrl/Cmd+L)</div><div style=\\\"text-align: center;\\\">Center (Ctrl/Cmd+E)</div><div style=\\\"text-align: right;\\\">Align Right (Ctrl/Cmd+R)</div><div style=\\\"text-align: justify;\\\">Justify (Ctrl/Cmd+J)</div>\\n\" +\n        \"    </div>\\n\" +\n        \"</div>\"\n})\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/editor/editor.tpl.js\n ** module id = 6\n ** module chunks = 0\n **/"],"sourceRoot":""}