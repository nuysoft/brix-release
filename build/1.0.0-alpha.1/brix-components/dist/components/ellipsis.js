!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jquery"),require("underscore"),require("brix/base")):"function"==typeof define&&define.amd?define(["jquery","underscore","brix/base"],t):"object"==typeof exports?exports["components/ellipsis"]=t(require("jquery"),require("underscore"),require("brix/base")):e["components/ellipsis"]=t(e.jquery,e.underscore,e["brix/base"])}(this,function(e,t,i){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){var n,s;n=[i(2),i(3),i(4)],s=function(e,t,i){var n="ellip",s="ellip-line";return i.extend({options:{lines:"auto"},init:function(){"auto"!==this.options.lines&&(this.options.lines=+this.options.lines),this.$element=e(this.element),this._text=this.$element.text(),this._height=this.$element.height(),this.$relatedElement=e('<span class="'+n+'" />').text(this._text),this.$element.empty().append(this.$relatedElement)},render:function(){if(1===this.options.lines)return void this.$relatedElement.addClass(s);if(!("auto"===this.options.lines&&this.$relatedElement.prop("scrollHeight")<=this._height)){var t=this.parseWords(this._text),i=this.parseStart(this.options.lines,t);this.update(t,i);var n=this,r="click.ellipsis_"+this.options.clientId;e(window).off(r).on(r,function(){n.render()})}},update:function(e,t){e[t]='<span class="'+s+'">'+e[t],e.push("</span>"),this.$relatedElement.html(e.join(""))},parseStart:function(e,i){var n=t.map(i,function(e){return"<span>"+e+"</span>"});return this.$relatedElement.html(n.join("")),n=this.$relatedElement.find("span"),"auto"===e?this.parseStartByHeight(n):this.parseStartByLines(n)},parseStartByLines:function(t){for(var i,n,s,r=0,o=0;o<t.length;o++)if(n=e(t[o]).position().top,n!==s&&(s=n,r+=1),r===this.options.lines){i=o;break}return i},parseStartByHeight:function(t){for(var i,n,s,r,o=0,p={},a=0;a<t.length;a++)if(n=e(t[a]).position().top,s=s||e(t[a]).height(),n!==r?(r=n,o+=1,p[o]=[t[a]]):p[o].push([t[a]]),n+s>this._height){i=a-p[o-1].length;break}return i},parseWords:function(t){return e.trim(t).split("")},resize:function(){var e=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){e.render()},100)}})}.apply(t,n),!(void 0!==s&&(e.exports=s))},function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t){e.exports=i}])});
//# sourceMappingURL=ellipsis.js.map