define(["jquery","underscore","components/base","./linkage.js","./column-rwd.js","./column-priority.js"],function(t,i,n,e,o,r){function l(){}var c=".table",s={UUID:0,COLUMN:{ID:"column-id",FIELD:"column-field",NAME:"column-name",RWD:{RANGE:"column-rwd-range",LIMIT:"column-rwd-limit",FADE:"column-rwd-fade",CURSOR:"column-rwd-cursor"},PRIORITY:{FIELDS:"column-priority-fields",TRIGGER:"column-priority-trigger",STATE:"column-priority-state",INDEX:"column-priority-index",PLACEMENT:"column-priority-placement",ALIGN:"column-priority-align"}}};return i.extend(l.prototype,n.prototype,{options:{},init:function(){this.$element=t(this.element)},render:function(){var n=this;e(this.element,function(t,i,e){n.trigger("toggle"+c,[i,e]),n.contextual()});var l,u;if(this.options[s.COLUMN.RWD.RANGE]){l=o(this,this.options,s,function(t,i){n.trigger("change"+o.NAMESPACE,[i])});var a="resize.table_"+this.clientId;t(window).on(a,i.throttle(function(){l.beautify()},50))}this.options[s.COLUMN.PRIORITY.TRIGGER]&&(u=r(this,this.options,s,function(t,i){n.trigger("change"+r.NAMESPACE,[i]),l.flush()}),this.options[s.COLUMN.PRIORITY.FIELDS]&&u.fields(this.options[s.COLUMN.PRIORITY.FIELDS])),this.columnRWDHandler=l,this.columnPriorityHandler=u},contextual:function(){i.each(this.$element.find("input:checkbox"),function(i){var n=t(i).prop("checked");t(i).closest("tr")[n?"addClass":"removeClass"]("active")})},destroy:function(){var i="resize.table_"+this.clientId;t(window).off(i),i="click"+r.NAMESPACE+"_"+this.clientId,t(document.body).off(i),this.columnPriorityHandler&&this.columnPriorityHandler.$manager.undelegate(this.columnPriorityHandler.$relatedElement)}}),l.extend=n.extend,l});